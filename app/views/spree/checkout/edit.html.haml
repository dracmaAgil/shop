#checkout{"data-hook" => ""}
  = render partial: 'spree/shared/error_messages', locals: { target: @order }
  .row{"data-hook" => "checkout_header"}
    .col-md-12
      %h1.columns.three.alpha{"data-hook" => "checkout_title"}= t('spree.checkout')
      .columns.thirteen.omega{"data-hook" => "checkout_progress"}= checkout_progress
  %hr
  .row{"data-hook" => "checkout_content"}
    %div{:class => "columns #{if @order.state != 'confirm' then 'col-md-9' else 'col-md-12' end}", "data-hook" => "checkout_form_wrapper"}
      = form_for @order, url: update_checkout_path(@order.state), html: { id: "checkout_form_#{@order.state}" } do |form|
        - if @order.state == 'address' || !@order.email?
          .form-group.field{:style => "clear: both"}
            = form.label :email
            %br/
            = form.email_field :email, class: 'form-control', required: true
        = render @order.state, form: form
    
    - if @order.state != 'confirm'
      #checkout-summary.col-md-3{"data-hook" => "checkout_summary_box"}
        = render partial: 'summary', locals: { order: @order }
:javascript
  Spree.current_order_id = "#{@order.number}"
  Spree.current_order_token = "#{@order.guest_token}"
- if I18n.locale != :en
  = javascript_include_tag 'jquery.validate/localization/messages_' + I18n.locale.to_s.downcase.gsub('-', '')
